#include <iostream> 
#include <iomanip>    
#include <limits>     
using namespace std; 
class ATM { 
private: 
float balance; 
int pin; 
public: 
    ATM() { 
        balance = 10000.00; 
        pin = 1234; 
    } 
 
    void start() { 
        int enteredPin; 
        cout << "==============================" << endl; 
        cout << "      WELCOME TO OUR ATM SYSTEM    " << endl; 
        cout << "==============================" << endl; 
 
        cout << "Enter your 4-digit PIN: "; 
        cin >> enteredPin; 
 
        if (enteredPin == pin) { 
            cout << "\nAccess Granted!\n"; 
            menu(); 
        } else { 
            cout << "\n Invalid PIN! Access Denied.\n"; 
        } 
    } 
private: 
    void menu() { 
        int choice; 
        do { 
            cout << "\n====== ATM MAIN MENU ======" << endl; 
            cout << "1. Check Balance" << endl; 
            cout << "2. Deposit Money" << endl; 
            cout << "3. Withdraw Money" << endl; 
            cout << "4. Change PIN" << endl; 
            cout << "5. Exit" << endl; 
            cout << "===========================" << endl; 
            cout << "Enter your choice: "; 
            cin >> choice; 
 
            if (cin.fail()) { 
                cin.clear(); 
                cin.ignore(numeric_limits<streamsize>::max(), '\n'); 
                cout << "Invalid input. Please enter a number.\n"; 
                continue; 
            } 
 
            switch (choice) { 
                case 1: checkBalance(); break; 
                case 2: deposit(); break; 
                case 3: withdraw(); break; 
                case 4: changePIN(); break; 
                case 5: cout << "Thank you for using our ATM. Goodbye! Have a nice Day! \n"; break; 
                default: cout << "Invalid choice. Please try again.\n"; 
            } 
        } while (choice != 5); 
    } 
 
    void checkBalance() { 
        cout << fixed << setprecision(2); 
        cout << "\n Your current balance is: " << balance << endl; 
    } 
 
    void deposit() { 
        float amount; 
        cout << "Enter the amount to deposit: "; 
        cin >> amount; 
 
 
        if (amount <= 0) { 
            cout << "Invalid amount. Please try again.\n"; 
        } else { 
            balance += amount; 
            cout << "Amount deposited successfully! \n"; 
            cout << "New balance: " << balance << endl; 
        } 
    } 
 
    void withdraw() { 
        float amount; 
        cout << "Enter the amount to withdraw: "; 
        cin >> amount; 
 
        if (amount <= 0) { 
            cout << "Invalid amount. Please try again.\n"; 
        } else if (amount > balance) { 
            cout << "Insufficient funds! Transaction cancelled.\n"; 
        } else { 
            balance -= amount; 
            cout << "Please collect your cash after the BEEP! \n"; 
            cout << "Remaining balance: " << balance << endl; 
        } 
    } 
 
    void changePIN() { 
        int oldPin, newPin; 
        cout << "Enter your current PIN: "; 
        cin >> oldPin; 
 
 
 
 
        if (oldPin == pin) { 
            cout << "Enter new 4-digit PIN: "; 
            cin >> newPin; 
 
            if (newPin >= 1000 && newPin <= 9999) { 
                pin = newPin; 
                cout << "PIN changed successfully! \n"; 
            } else { 
                cout << "Invalid PIN format! Must be 4 digits.\n"; 
            } 
        } else { 
            cout << "Incorrect current PIN.\n"; 
        } 
    } 
}; 
 
int main() { 
    ATM atm;   
    atm.start();  
  
    return 0; 
} 
